<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
    <script src="/javascripts/index.js"></script>
    <script src="/javascripts/post.js"></script>
</head>
    <body onload="init()">
        <div class="container">
            <% if (post === null) { %>
                <p>Cannot load post</p>
            <% } else { %>
                <div class="post_details">
                    <img src="/<%= post.image %>" alt="<%= post.plant_name %>" width="200" height="200">
                    <p>Plant name:<%= post.plant_name %></p>
                    <p>Location: <%= post.location %></p>
                    <p>Description: <%= post.description %></p>
                    <p>Date: <%= post.date %></p>
                    <p>Height: <%= post.height %></p>
                    <p>Spread: <%= post.spread %></p>
                    <p>User: <%= post.username %></p>
                </div>
            <% }; %>

            <div id="chat_interface">
                <h2>Comments</h2>
                <% if (comments === null) { %>
                    <p>Cannot load comments</p>
                <% } else { %>
                    <div id="history">
                        <% comments.forEach(comment => { %>
                            <div class="post_content">
                                <p><strong><%= comment.username %></strong></p>
                                <p><%= comment.commentText %></p>
                                <p><%= comment.date %></p>
                            </div>
                            <hr>
                        <% }); %>
                    </div>
                <% }; %>
                <div id="input">
                    <form id="comment_form" action="/save-comment" method="post" onsubmit="return false;">
                        <input type="hidden" id="postId" name="postId" value="<%= postId %>">
                        <p><label for="name">Your name: </label>
                            <input type="text" id="username" name="username">
                        </p>
                        <p>
                            <input type="text" id="commentText" name="commentText" placeholder="Enter your reply...">
                            <button id="comment_send" onclick="sendCommentText()">Send</button>
                        </p>
                    </form>
                </div>
            </div>
        </div>
        <button id="close_btn" onclick="returnHome()">Go Back</button>
    </body>
</html>
